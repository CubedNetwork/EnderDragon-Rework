# Made by: @rcube.
# Summon 3 phantoms per player, compatible with Vanilla Tweaks' Larger Phantoms
#
# Called By: rcube:dragon_rework/attacks/run
# Ran as: Entity, Dragon (scores={rcube_dragonRework.phase=7})

# 5 left, 5 forward, 20 up
execute as @a[predicate=rcube:dragon_rework/end_centre,gamemode=!spectator] unless score Entity.CustomPhantom rcube_dragonRework.store matches 50 at @s rotated ~ 0 run summon phantom ^5 ^20 ^5 {DeathLootTable:"rcube:dragon_rework/empty",Fire:0,HasVisualFire:false,Size:7,CustomName:'[{"text":"     "}]',CustomNameVisible:true,Health:35,PersistenceRequired:true,Silent:true,Team:"rcube.dragon_rework",Tags:["dragon_rework.phantom","dragon_rework.remove","dragon_rework.arrowImmune","dragon_rework.noFire","larPha.done"],active_effects:[{id:"minecraft:invisibility",duration:-1,amplifier:0,show_particles:0b},{id:"minecraft:fire_resistance",duration:-1,amplifier:0,show_particles:0b}],attributes:[{id:"max_health",base:35},{id:"follow_range",base:100},{id:"movement_speed",base:5},{id:"attack_damage",base:20}]}
# 0 left, 0 forward, 20 up
execute as @a[predicate=rcube:dragon_rework/end_centre,gamemode=!spectator] unless score Entity.CustomPhantom rcube_dragonRework.store matches 50 at @s rotated ~ 0 run summon phantom ^ ^20 ^ {DeathLootTable:"rcube:dragon_rework/empty",Fire:0,HasVisualFire:false,Size:7,CustomName:'[{"text":"     "}]',CustomNameVisible:true,Health:35,PersistenceRequired:true,Silent:true,Team:"rcube.dragon_rework",Tags:["dragon_rework.phantom","dragon_rework.remove","dragon_rework.arrowImmune","dragon_rework.noFire","larPha.done"],active_effects:[{id:"minecraft:invisibility",duration:-1,amplifier:0,show_particles:0b},{id:"minecraft:fire_resistance",duration:-1,amplifier:0,show_particles:0b}],attributes:[{id:"max_health",base:35},{id:"follow_range",base:100},{id:"movement_speed",base:5},{id:"attack_damage",base:20}]}
# 5 right, 5 back, 20 up
execute as @a[predicate=rcube:dragon_rework/end_centre,gamemode=!spectator] unless score Entity.CustomPhantom rcube_dragonRework.store matches 50 at @s rotated ~ 0 run summon phantom ^-5 ^20 ^-5 {DeathLootTable:"rcube:dragon_rework/empty",Fire:0,HasVisualFire:false,Size:7,CustomName:'[{"text":"     "}]',CustomNameVisible:true,Health:35,PersistenceRequired:true,Silent:true,Team:"rcube.dragon_rework",Tags:["dragon_rework.phantom","dragon_rework.remove","dragon_rework.arrowImmune","dragon_rework.noFire","larPha.done"],active_effects:[{id:"minecraft:invisibility",duration:-1,amplifier:0,show_particles:0b},{id:"minecraft:fire_resistance",duration:-1,amplifier:0,show_particles:0b}],attributes:[{id:"max_health",base:35},{id:"follow_range",base:100},{id:"movement_speed",base:5},{id:"attack_damage",base:20}]}

# 10 left, 10 forward, 20 up
execute if entity @s[tag=dragon_rework.UNHINGED] as @a[predicate=rcube:dragon_rework/end_centre,gamemode=!spectator] unless score Entity.CustomPhantom rcube_dragonRework.store matches 50 at @s rotated ~ 0 run summon phantom ^10 ^20 ^10 {DeathLootTable:"rcube:dragon_rework/empty",Fire:0,HasVisualFire:false,Size:7,CustomName:'[{"text":"     "}]',CustomNameVisible:true,Health:35,PersistenceRequired:true,Silent:true,Team:"rcube.dragon_rework",Tags:["dragon_rework.phantom","dragon_rework.remove","dragon_rework.arrowImmune","dragon_rework.noFire","larPha.done"],active_effects:[{id:"minecraft:invisibility",duration:-1,amplifier:0,show_particles:0b},{id:"minecraft:fire_resistance",duration:-1,amplifier:0,show_particles:0b}],attributes:[{id:"max_health",base:35},{id:"follow_range",base:100},{id:"movement_speed",base:5},{id:"attack_damage",base:20}]}
# 10 right, 10 back, 20 up
execute if entity @s[tag=dragon_rework.UNHINGED] as @a[predicate=rcube:dragon_rework/end_centre,gamemode=!spectator] unless score Entity.CustomPhantom rcube_dragonRework.store matches 50 at @s rotated ~ 0 run summon phantom ^-10 ^20 ^-10 {DeathLootTable:"rcube:dragon_rework/empty",Fire:0,HasVisualFire:false,Size:7,CustomName:'[{"text":"     "}]',CustomNameVisible:true,Health:35,PersistenceRequired:true,Silent:true,Team:"rcube.dragon_rework",Tags:["dragon_rework.phantom","dragon_rework.remove","dragon_rework.arrowImmune","dragon_rework.noFire","larPha.done"],active_effects:[{id:"minecraft:invisibility",duration:-1,amplifier:0,show_particles:0b},{id:"minecraft:fire_resistance",duration:-1,amplifier:0,show_particles:0b}],attributes:[{id:"max_health",base:35},{id:"follow_range",base:100},{id:"movement_speed",base:5},{id:"attack_damage",base:20}]}
